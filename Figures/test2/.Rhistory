effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-85, 75, length.out = 4)   )
#plot.title = element_text(size = 18, hjust = 0),
#plot.subtitle = element_text(size = 16, hjust = 0),
#plot.margin = margin(10,0,0,0),
#legend.margin = margin(5,5,20,0))
#for papa only
if (territory == "Hawaii") {
scale_x_continuous(  breaks =seq(-2,20,2) )
}
if (territory == "") {
scale_x_continuous( breaks =seq(-20,24,2) )
}
if ( mpa_name  == 'Nazca-Desventuradas') {
scale_x_continuous( breaks = seq(-85, -75, length.out = 4)   )
}
#quartz()
effortPlot[[1]]
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-85, 75, length.out = 4)   )
#quartz()
effortPlot[[1]]
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-85, 75,  4)   )
#quartz()
effortPlot[[1]]
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-84, 76,  4)   )
#quartz()
effortPlot[[1]]
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-84, 76,  5)   )
#quartz()
effortPlot[[1]]
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-84, 76, 4)   )
#quartz()
effortPlot[[1]]
####load data locally####
binned_effort = Rdata[[index]][[1]]
binned_effort2 = Rdata[[index]][[2]]
binned_effort3 = Rdata[[index]][[3]]
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-84, 76, 4)   )
#quartz()
effortPlot[[1]]
title = paste(mpa_name, '1', '.png', sep = " ", collapse = NULL)
if(sizing == 'large'){
ggsave(title, width = 11, height = 10)
} else {
ggsave(title, width = 10, height = 10)
}
territory = 'Islas San FÃ©lix and San Ambrosio'
mpa_name = 'Nazca-Desventuradas'
sizing = 'small'
curr_mpa = mpa[mpa@data$ORIG_NAME == mpa_name, ]
curr_eez = eez[eez@data$Territory1 == territory,] # get a specific EEZ
leaflet() %>%
addTiles() %>%
addPolygons(data = curr_mpa, color ="green") %>%
#addPolygons(data = mpa_before, color = "blue")
#%>%
addPolygons(data = curr_eez, color = "blue")
#transform shapefile into sf object for plotting
curr_mpa <- curr_mpa %>%
sf::st_as_sf()
print('mpa as sf')
if(territory != 'Hawaii') {
print('eez as sf')
curr_eez <- curr_eez %>%
sf::st_as_sf()
}
if(territory == "Hawaii") {
print('mpa_before')
mpa_before <- mpa_before %>%
sf::st_as_sf()
}
####load data locally####
binned_effort = Rdata[[index]][[1]]
binned_effort2 = Rdata[[index]][[2]]
binned_effort3 = Rdata[[index]][[3]]
index
effortPlot = list()
setwd('/Users/tiffanyong/Documents/GitHub/GFW5/Figures/test2')
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-84, 76, 4)   )
#quartz()
effortPlot[[1]]
binned_effort
View(binned_effort)
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-84, 74, 4)   )
#quartz()
effortPlot[[1]]
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-84, 70, 4)   )
#quartz()
effortPlot[[1]]
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 1024),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
)
#quartz()
effortPlot[[1]]
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 3000),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 32),
axis.text.y = element_text(size = 32),
legend.position="none"
) +
scale_x_continuous( breaks = seq(-84, 70, 4)   )
#quartz()
effortPlot[[1]]
title = paste(mpa_name, '1', '.png', sep = " ", collapse = NULL)
if(sizing == 'large'){
ggsave(title, width = 11, height = 10)
} else {
ggsave(title, width = 10, height = 10)
}
effortPlot[[1]] = binned_effort %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
limits=c(NA, 3000),
breaks = scales::log_breaks(n = 6, base = 4))+
#hrbrthemes::theme_ipsum()+
theme_minimal()+
labs(#title = graph_title,
#subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x =element_blank(),
axis.text.y = element_blank(),
legend.position="none"
)
#quartz()
effortPlot[[1]]
title = paste(mpa_name, '1', '.png', sep = " ", collapse = NULL)
if(sizing == 'large'){
ggsave(title, width = 11, height = 10)
} else {
ggsave(title, width = 10, height = 10)
}
ggsave(title, width = 4, height = 4)
ggsave(title, width = 5, height = 4)
