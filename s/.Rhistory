hrbrthemes::theme_ipsum()+
labs(title = graph_title,
subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8),
plot.title = element_text(size = 12, hjust = 0),
plot.subtitle = element_text(size = 10, hjust = 0),
plot.margin = margin(10,0,0,0),
legend.margin = margin(5,5,20,0))
#change to yo2 instad of binned_effort[[k]] for Hawaii or PRI-----
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()+
labs(title = graph_title,
subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8),
plot.title = element_text(size = 12, hjust = 0),
plot.subtitle = element_text(size = 10, hjust = 0),
plot.margin = margin(10,0,0,0),
legend.margin = margin(5,5,20,0))
#change to yo2 instad of binned_effort[[k]] for Hawaii or PRI-----
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()+
labs(title = graph_title,
subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8),
plot.title = element_text(size = 12, hjust = 0),
plot.subtitle = element_text(size = 10, hjust = 0),
plot.margin = margin(10,0,0,0),
legend.margin = margin(5,5,20,0))
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()+
labs(title = graph_title,
subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8),
plot.title = element_text(size = 12, hjust = 0),
plot.subtitle = element_text(size = 10, hjust = 0),
plot.margin = margin(10,0,0,0),
legend.margin = margin(5,5,20,0))
effortPlot = list()
for(k in 1:2) {
if(territory=="Hawaii" || mpa_name=="Pacific Remote Islands") {
yo = binned_effort[[k]]
yo$lon2 = with(yo,ifelse(lon_bin_center<0, 180+lon_bin_center,lon_bin_center-180))
yo2 = yo[,c("lat_bin_center","lon2","fishing_hours")]
}
#change to yo2 instad of binned_effort[[k]] for Hawaii or PRI-----
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()+
labs(title = graph_title,
subtitle = subtitles[[k]],
y = "",
x = "")+
#for pipa only -----------
#scale_x_discrete(breaks = c(-178,-173, -168))
#scale_x_discrete(breaks = c(-134,-130, -125,-120))
}
effortPlot = list()
for(k in 1:2) {
if(territory=="Hawaii" || mpa_name=="Pacific Remote Islands") {
yo = binned_effort[[k]]
yo$lon2 = with(yo,ifelse(lon_bin_center<0, 180+lon_bin_center,lon_bin_center-180))
yo2 = yo[,c("lat_bin_center","lon2","fishing_hours")]
}
#change to yo2 instad of binned_effort[[k]] for Hawaii or PRI-----
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()+
labs(title = graph_title,
subtitle = subtitles[[k]],
y = "",
x = "")
#for pipa only -----------
#scale_x_discrete(breaks = c(-178,-173, -168))
#scale_x_discrete(breaks = c(-134,-130, -125,-120))
}
effortPlot = list()
for(k in 1:2) {
if(territory=="Hawaii" || mpa_name=="Pacific Remote Islands") {
yo = binned_effort[[k]]
yo$lon2 = with(yo,ifelse(lon_bin_center<0, 180+lon_bin_center,lon_bin_center-180))
yo2 = yo[,c("lat_bin_center","lon2","fishing_hours")]
}
#change to yo2 instad of binned_effort[[k]] for Hawaii or PRI-----
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()+
labs(title = 'graph_title',
#subtitle = subtitles[[k]],
y = "",
x = "")
#for pipa only -----------
#scale_x_discrete(breaks = c(-178,-173, -168))
#scale_x_discrete(breaks = c(-134,-130, -125,-120))
}
k=1
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()+
labs(title = 'graph_title',
#subtitle = subtitles[[k]],
y = "",
x = "")
effortPlot = list()
for(k in 1:2) {
if(territory=="Hawaii" || mpa_name=="Pacific Remote Islands") {
yo = binned_effort[[k]]
yo$lon2 = with(yo,ifelse(lon_bin_center<0, 180+lon_bin_center,lon_bin_center-180))
yo2 = yo[,c("lat_bin_center","lon2","fishing_hours")]
}
#change to yo2 instad of binned_effort[[k]] for Hawaii or PRI-----
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()
#for pipa only -----------
#scale_x_discrete(breaks = c(-178,-173, -168))
#scale_x_discrete(breaks = c(-134,-130, -125,-120))
}
=======
setwd('/Users/tiffanyong/Documents/GitHub/GFW5/s')
setwd('/Users/tiffanyong/Documents/GitHub/GFW5/s')
library(sf)
library(mregions)
library(DBI)
library(bigrquery)
library(hrbrthemes)
library(ggsci)
library(tidyverse) #loads dplyr and friends
require(ggplot2) #there is no package called ggplot
library(hrbrthemes)
library(viridisLite)
library(rgdal)
library(dplyr)
library(viridis)
library(rgdal)  #for readOGR()
library(rasterVis) #for levelplot
library(RColorBrewer) #for levelplot
library(rgeos)
library(grid)
library(gridExtra)
library(rwdpa) #TO FIND SHAPEFILES POSSIBLY!!!!
library(raster) #for raster images
library(fields) # for image.plot
library(colorRamps) # for image.plot color scale
library(lattice) #for levelplot perhaps
library(maptools) #to read shapefiles
library(sp) #for prime meridian
library(maps) #for prime meridian
library(leaflet) #for visualization
library(RColorBrewer)
library(scales)
library(lubridate)
install.packages('rwdpa')
install.packages('hrbrthemes')
effortPlot = list()
for(k in 1:2) {
if(territory=="Hawaii" || mpa_name=="Pacific Remote Islands") {
yo = binned_effort[[k]]
yo$lon2 = with(yo,ifelse(lon_bin_center<0, 180+lon_bin_center,lon_bin_center-180))
yo2 = yo[,c("lat_bin_center","lon2","fishing_hours")]
}
#change to yo2 instad of binned_effort[[k]] for Hawaii or PRI-----
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()+
labs(title = graph_title,
subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8),
plot.title = element_text(size = 12, hjust = 0),
plot.subtitle = element_text(size = 10, hjust = 0),
plot.margin = margin(10,0,0,0),
legend.margin = margin(5,5,20,0))
#for pipa only -----------
#scale_x_discrete(breaks = c(-178,-173, -168))
#scale_x_discrete(breaks = c(-134,-130, -125,-120))
}
quartz()
grid.arrange(effortPlot[[1]], effortPlot[[2]], nrow=2)
binned_effort[[1]]
effortPlot = list()
for(k in 1:2) {
if(territory=="Hawaii" || mpa_name=="Pacific Remote Islands") {
yo = binned_effort[[k]]
yo$lon2 = with(yo,ifelse(lon_bin_center<0, 180+lon_bin_center,lon_bin_center-180))
yo2 = yo[,c("lat_bin_center","lon2","fishing_hours")]
}
#change to yo2 instad of binned_effort[[k]] for Hawaii or PRI-----
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
hrbrthemes::theme_ipsum()+
labs(title = graph_title,
subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8),
plot.title = element_text(size = 12, hjust = 0),
plot.subtitle = element_text(size = 10, hjust = 0),
plot.margin = margin(10,0,0,0),
legend.margin = margin(5,5,20,0))
#for pipa only -----------
#scale_x_discrete(breaks = c(-178,-173, -168))
#scale_x_discrete(breaks = c(-134,-130, -125,-120))
}
library(sf)
library(mregions)
library(DBI)
library(bigrquery)
library(hrbrthemes)
library(ggsci)
library(tidyverse) #loads dplyr and friends
require(ggplot2) #there is no package called ggplot
library(hrbrthemes)
library(viridisLite)
library(rgdal)
library(dplyr)
library(viridis)
library(rgdal)  #for readOGR()
library(rasterVis) #for levelplot
library(RColorBrewer) #for levelplot
library(rgeos)
library(grid)
library(gridExtra)
library(rwdpa) #TO FIND SHAPEFILES POSSIBLY!!!!
library(raster) #for raster images
library(fields) # for image.plot
library(colorRamps) # for image.plot color scale
library(lattice) #for levelplot perhaps
library(maptools) #to read shapefiles
library(sp) #for prime meridian
library(maps) #for prime meridian
library(leaflet) #for visualization
library(RColorBrewer)
library(scales)
library(lubridate)
install.packages('hrbrthemes')
library(hrbrthemes)
install.packages('lazyeval')
library(sf)
library(mregions)
library(DBI)
library(bigrquery)
library(hrbrthemes)
library(ggsci)
library(tidyverse) #loads dplyr and friends
require(ggplot2) #there is no package called ggplot
library(hrbrthemes)
library(viridisLite)
library(rgdal)
library(dplyr)
library(viridis)
library(rgdal)  #for readOGR()
library(rasterVis) #for levelplot
library(RColorBrewer) #for levelplot
library(rgeos)
library(grid)
library(gridExtra)
library(rwdpa) #TO FIND SHAPEFILES POSSIBLY!!!!
library(raster) #for raster images
library(fields) # for image.plot
library(colorRamps) # for image.plot color scale
library(lattice) #for levelplot perhaps
library(maptools) #to read shapefiles
library(sp) #for prime meridian
library(maps) #for prime meridian
library(leaflet) #for visualization
library(RColorBrewer)
library(scales)
library(lubridate)
library(hrbrthemes)
effortPlot = list()
for(k in 1:2) {
if(territory=="Hawaii" || mpa_name=="Pacific Remote Islands") {
yo = binned_effort[[k]]
yo$lon2 = with(yo,ifelse(lon_bin_center<0, 180+lon_bin_center,lon_bin_center-180))
yo2 = yo[,c("lat_bin_center","lon2","fishing_hours")]
}
#change to yo2 instad of binned_effort[[k]] for Hawaii or PRI-----
effortPlot[[k]] = binned_effort[[k]] %>%
filter(fishing_hours > 1) %>%
ungroup() %>%
ggplot()+
#change to lon2 and b2 and b3 vs lon_bin_center curr_mpa, curr_eez
geom_raster(aes(x = lon_bin_center, y = lat_bin_center, fill = fishing_hours))+
geom_sf(data = curr_mpa,
fill = NA,
col = "red",
size = 0.5
) +
geom_sf(data = curr_eez,
fill = NA,
col = "black",
linetype= 'dashed',
size = 0.5
) +
viridis::scale_fill_viridis(name = "Fishing hours" ,
trans = "log",
breaks = scales::log_breaks(n = 10, base = 4))+
#hrbrthemes::theme_ipsum()+
labs(title = graph_title,
subtitle = subtitles[[k]],
y = "",
x = "")+
theme(axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8),
plot.title = element_text(size = 12, hjust = 0),
plot.subtitle = element_text(size = 10, hjust = 0),
plot.margin = margin(10,0,0,0),
legend.margin = margin(5,5,20,0))
#for pipa only -----------
#scale_x_discrete(breaks = c(-178,-173, -168))
#scale_x_discrete(breaks = c(-134,-130, -125,-120))
}
quartz()
grid.arrange(effortPlot[[1]], effortPlot[[2]], nrow=2)
